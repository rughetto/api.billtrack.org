(function(A){A.jmap=A.jmap||{};A.jmap.store={};A.jmap.JDetails={name:"jMaps Google Maps Plugin",description:"jMaps is a jQuery plugin that makes google maps easy",version:"3.0",releaseDate:"19/04/2008",author:"Tane Piper <digitalspaghetti@gmail.com>",blog:"http://digitalspaghetti.me.uk",repository:"http://hg.digitalspaghetti.me.uk/jmaps",googleGroup:"http://groups.google.com/group/jmaps",licenceType:"MIT",licenceURL:"http://www.opensource.org/licenses/mit-license.php"};A.jmap.JErrors={en:{functionDoesNotExist:"jMap Error 1: The function does not exist",addressNotFound:"This address cannot be found.  Please modify your search.",browserNotCompatible:"This browser is reported as being not compatible with Google Maps.",cannotLoad:"Cannot load the Google Maps API at this time.  Please check your connection."},fr:{addressNotFound:"Cette adresse ne peut pas être trouvée. Veuillez modifier votre recherche.",browserNotCompatible:"Ce navigateur est rapporté en tant qu'étant non compatible avec des cartes de Google.",cannotLoad:"Ne peut pas charger les cartes api de Google actuellement. Veuillez vérifier votre raccordement."},de:{addressNotFound:"Diese Adresse kann nicht gefunden werden. Ändern Sie bitte Ihre Suche.",browserNotCompatible:"Diese Datenbanksuchroutine wird als seiend nicht kompatibel mit Google Diagrammen berichtet.",cannotLoad:"Kann nicht die Google Diagramme API diesmal laden. Überprüfen Sie bitte Ihren Anschluß."},nl:{addressNotFound:"Dit adres kan worden gevonden niet. Gelieve te wijzigen uw onderzoek.",browserNotCompatible:"Dit browser wordt gemeld zoals zijnd niet compatibel met Kaarten Google.",cannotLoad:"Kan de Google Kaarten API op dit moment laden niet. Gelieve te controleren uw verbinding."},es:{addressNotFound:"Esta dirección no puede ser encontrada. Modifique por favor su búsqueda.",browserNotCompatible:"Este browser se divulga como siendo no compatible con los mapas de Google.",cannotLoad:"No puede cargar los mapas API de Google en este tiempo. Compruebe por favor su conexión."},sv:{addressNotFound:"Denna adress kunde ej hittas. Var god justera din sökning",browserNotCompatible:"Denna webbläsare är ej kompatibel med Google Maps",cannotLoad:"Kan inte ladda Google Maps API för tillfället. Var god kontrollera din anslutning."}};A.jmap.JDefaults={language:"en",mapType:"map",mapCenter:[55.958858,-3.162302],mapDimensions:[400,400],mapZoom:12,mapControlSize:"small",mapEnableType:false,mapEnableOverview:false,mapEnableDragging:true,mapEnableInfoWindows:true,mapEnableDoubleClickZoom:false,mapEnableScrollZoom:false,mapEnableSmoothZoom:false,mapEnableGoogleBar:false,mapEnableScaleControl:false,mapShowjMapIcon:false,debugMode:false};A.jmap.JAdsManagerDefaults={publisherId:""};A.jmap.JFeedDefaults={feedUrl:"",mapCenter:[]};A.jmap.JGroundOverlayDefaults={overlaySouthWestBounds:[],overlayNorthEastBounds:[],overlayImage:""};A.jmap.JIconDefaults={iconImage:"",iconShadow:"",iconSize:null,iconShadowSize:null,iconAnchor:null,iconInfoWindowAnchor:null,iconPrintImage:"",iconMozPrintImage:"",iconPrintShadow:"",iconTransparent:""};A.jmap.JMarkerManagerDefaults={borderPadding:100,maxZoom:17,trackMarkers:false};A.jmap.JMarkerDefaults={pointLatLng:[],pointHTML:null,pointOpenHTMLEvent:"click",pointIsDraggable:false,pointIsRemovable:false,pointRemoveEvent:"dblclick",pointMinZoom:4,pointMaxZoom:17,pointIcon:null,pointMaxContent:null,pointMaxTitle:null};A.jmap.JPolygonDefaults={polygonPoints:[],polygonStrokeColor:"#000000",polygonStrokeWeight:5,polygonStrokeOpacity:1,polygonFillColor:"#ff0000",polygonFillOpacity:1,mapCenter:[],polygonClickable:true};A.jmap.JPolylineDefaults={polylinePoints:[],polylineStrokeColor:"#ff0000",polylineStrokeWidth:10,polylineStrokeOpacity:1,mapCenter:[],polylineGeodesic:false,polylineClickable:true};A.jmap.JScreenOverlayDefaults={};A.jmap.JSearchAddressDefaults={address:null,cache:{},countryCode:"uk"};A.jmap.JSearchDirectionsDefault={fromAddress:"",toAddress:"",directionsPanel:""};A.jmap.JTrafficDefaults={method:"create",mapCenter:[]};A.jmap.JMoveToDefaults={centerMethod:"normal",mapType:null,mapCenter:[],mapZoom:null};A.jmap.JSavePositionDefaults={recall:false};A.jmap.variables={mapType:"Unknown",mapCenter:[]};A.jmap.init=function(C,B,E){var B=A.extend({},A.jmap.JDefaults,B);var B=A.jmap.JOptions=A.meta?A.extend({},B,A(this).data()):B;A.jmap._initChecks(C);C.jmap=A.jmap.GMap2=new GMap2(C);if(B.mapShowjMapIcon){A.jmap.addScreenOverlay({imageUrl:"http://hg.digitalspaghetti.me.uk/jmaps/raw-file/3228fade0b3c/docs/images/jmaps-mapicon.png",screenXY:[70,10],overlayXY:[0,0],size:[42,25]})}var D=A.jmap._initMapType(B.mapType);C.jmap.setCenter(new GLatLng(B.mapCenter[0],B.mapCenter[1]),B.mapZoom,D);switch(B.mapControlSize){case"small":C.jmap.addControl(new GSmallMapControl());break;case"large":C.jmap.addControl(new GLargeMapControl());break}if(B.mapEnableType){C.jmap.addControl(new GMapTypeControl())}if(B.mapEnableOverview){C.jmap.addControl(new GOverviewMapControl())}if(!B.mapEnableDragging){C.jmap.disableDragging()}if(!B.mapEnableInfoWindows){C.jmap.disableInfoWindow()}if(B.mapEnableDoubleClickZoom){C.jmap.enableDoubleClickZoom()}if(B.mapEnableScrollZoom){C.jmap.enableScrollWheelZoom()}if(B.mapEnableSmoothZoom){C.jmap.enableContinuousZoom()}if(B.mapEnableGoogleBar){C.jmap.enableGoogleBar()}if(B.mapEnableScaleControl){C.jmap.addControl(new GScaleControl())}if(B.debugMode){console.log(C.jmap)}A.jmap.getMapType();if(typeof E=="function"){return E(C,B)}};A.jmap.addFeed=function(B,D){var B=A.extend({},A.jmap.JFeedDefaults,B);var C=new GGeoXml(B.feedUrl);A.jmap.GMap2.addOverlay(C);if(B.mapCenter[0]&&B.mapCenter[1]){A.jmap.GMap2.setCenter(new GLatLng(B.mapCenter[0],B.mapCenter[1]))}if(typeof D=="function"){return D(C,B)}};A.jmap.addGroundOverlay=function(B,D){var B=A.extend({},A.jmap.JGroundOverlayDefaults,B);var C=new GLatLngBounds(new GLatLng(B.overlaySouthWestBounds[0],B.overlaySouthWestBounds[1]),new GLatLng(B.overlayNorthEastBounds[0],B.overlayNorthEastBounds[1]));A.jmap.GGroundOverlay=new GGroundOverlay(B.overlayImage,C);A.jmap.GMap2.addOverlay(A.jmap.GGroundOverlay);if(typeof D=="function"){return D()}};A.jmap.hideGroundOverlay=function(B){A.jmap.GGroundOverlay.hide();if(typeof B=="function"){return B()}};A.jmap.showGroundOverlay=function(B){isHidden=A.jmap.GGroundOverlay.isHidden();if(isHidden){A.jmap.GGroundOverlay.show()}if(typeof B=="function"){return B()}};A.jmap.addMarker=function(D,E){var D=A.extend({},A.jmap.JMarkerDefaults,D);var C={};if(typeof D.pointIcon=="object"){A.extend(C,{icon:D.pointIcon})}if(D.pointIsDraggable){A.extend(C,{draggable:D.pointIsDraggable})}var B=new GMarker(new GLatLng(D.pointLatLng[0],D.pointLatLng[1]),C);if(D.pointHTML){GEvent.addListener(B,D.pointOpenHTMLEvent,function(){B.openInfoWindowHtml(D.pointHTML,{maxContent:D.pointMaxContent,maxTitle:D.pointMaxTitle})})}if(D.pointIsRemovable){GEvent.addListener(B,D.pointRemoveEvent,function(){A.jmap.GMap2.removeOverlay(B)})}if(A.jmap.GMarkerManager){A.jmap.GMarkerManager.addMarker(B,D.pointMinZoom,D.pointMaxZoom)}else{A.jmap.GMap2.addOverlay(B)}if(typeof E=="function"){return E()}};A.jmap.addScreenOverlay=function(C,D){var C=A.extend({},A.jmap.JScreenOverlayDefaults,C);var B=new GScreenOverlay(C.imageUrl,new GScreenPoint(C.screenXY[0],C.screenXY[1]),new GScreenPoint(C.overlayXY[0],C.overlayXY[1]),new GScreenSize(C.size[0],C.size[1]));A.jmap.GMap2.addOverlay(B);if(typeof D=="function"){return D(B,C)}};A.jmap.addPolygon=function(C,E){var C=A.extend({},A.jmap.JPolygonDefaults,C);B={};if(!C.polygonClickable){var B=A.extend({},B,{clickable:false})}if(C.mapCenter[0]&&C.mapCenter[1]){A.jmap.GMap2.setCenter(new GLatLng(C.mapCenter[0],C.mapCenter[1]))}var D=new GPolygon(C.polygonPoints,C.polygonStrokeColor,C.polygonStrokeWeight,C.polygonStrokeOpacity,C.polygonFillColor,C.polygonFillOpacity,B);A.jmap.GMap2.addOverlay(D);if(typeof E=="function"){return E()}};A.jmap.addPolyline=function(C,E){var C=A.extend({},A.jmap.JPolylineDefaults,C);var D={};if(C.polylineGeodesic){A.extend({},D,{geodesic:true})}if(!C.polylineClickable){A.extend({},D,{clickable:false})}if(C.mapCenter[0]&&C.mapCenter[1]){A.jmap.GMap2.setCenter(new GLatLng(C.mapCenter[0],C.mapCenter[1]))}var B=new GPolyline(C.polylinePoints,C.polylineStrokeColor,C.polylineStrokeWidth,C.polylineStrokeOpacity,D);A.jmap.GMap2.addOverlay(B);if(typeof E=="function"){return E()}};A.jmap.addTrafficInfo=function(B,C){var B=A.extend({},A.jmap.JTrafficDefaults,B);switch(B.method){case"create":A.jmap.GTrafficOverlay=new GTrafficOverlay;A.jmap.GMap2.addOverlay(A.jmap.GTrafficOverlay);if(B.mapCenter[0]&&B.mapCenter[1]){A.jmap.GMap2.setCenter(new GLatLng(B.mapCenter[0],B.mapCenter[1]))}break;case"destroy":A.jmap.GMap2.removeOverlay(A.jmap.GTrafficOverlay);break}if(typeof C=="function"){return C()}};A.jmap.disableTraffic=function(B){A.jmap.GTrafficOverlay.hide();if(typeof B=="function"){return B()}};A.jmap.enableTraffic=function(B){A.jmap.GTrafficOverlay.show();if(typeof B=="function"){return B()}};A.jmap.createAdsManager=function(B,C){var B=A.extend({},A.jmap.JAdsManagerDefaults,B);A.jmap.GAdsManager=new GAdsManager(A.jmap.GMap2,B.publisherId);if(typeof C=="function"){return C()}};A.jmap.hideAds=function(B){A.jmap.GAdsManager.disable();if(typeof B=="function"){return B()}};A.jmap.showAds=function(B){A.jmap.GAdsManager.enable();if(typeof B=="function"){return B()}};A.jmap.createGeoCache=function(B){A.jmap.GGeocodeCache=new GGeocodeCache();if(typeof B=="function"){return B()}};A.jmap.createGeoCoder=function(B,C){if(B){A.jmap.GClientGeocoder=new GClientGeocoder(B)}else{A.jmap.GClientGeocoder=new GClientGeocoder}if(typeof C=="function"){return C()}};A.jmap.createIcon=function(B){var B=A.extend({},A.jmap.JIconDefaults,B);var C=new GIcon(G_DEFAULT_ICON);if(B.iconImage){C.image=B.iconImage}if(B.iconShadow){C.shadow=B.iconShadow}if(B.iconSize){C.iconSize=B.iconSize}if(B.iconShadowSize){C.shadowSize=B.iconShadowSize}if(B.iconAnchor){C.iconAnchor=B.iconAnchor}if(B.iconInfoWindowAnchor){C.infoWindowAnchor=B.iconInfoWindowAnchor}return C};A.jmap.createMarkerManager=function(B,C){var B=A.extend({},A.jmap.JMarkerManagerDefaults,B);A.jmap.GMarkerManager=new GMarkerManager(A.jmap.GMap2,B);if(typeof C=="function"){return C()}};A.jmap.searchAddress=function(B,E){var B=A.extend({},A.jmap.JSearchAddressDefaults,B);var C=A.extend({},A.jmap.JMarkerManagerDefaults);if(typeof A.jmap.GClientGeocoder=="undefined"){var D=new GClientGeocoder}else{var D=A.jmap.GClientGeocoder}D.getLatLng(B.address,function(F){if(!F){throw new Error(A.jmap.JErrors[A.jmap.JOptions.language].addressNotFound)}if(typeof E=="function"){return E(B,F)}})};A.jmap.searchDirections=function(C,D){var C=A.extend({},A.jmap.JSearchDirectionsDefaults,C);var B=A("#"+C.directionsPanel).get(0);A.jmap.GDirections=new GDirections(A.jmap.GMap2,B);A.jmap.GDirections.load(C.fromAddress+" to "+C.toAddress);if(typeof D=="function"){return D()}};A.jmap.moveTo=function(C,E){var C=A.extend({},A.jmap.JMoveToDefaults,C);if(C.mapType){var D=A.jmap._initMapType(C.mapType)}var B=new GLatLng(C.mapCenter[0],C.mapCenter[1]);switch(C.centerMethod){case"normal":A.jmap.GMap2.setCenter(B,C.mapZoom,D);break;case"pan":A.jmap.GMap2.panTo(B);break}if(typeof E=="function"){return E()}};A.jmap.savePosition=function(B,C){var B=A.extend({},A.jmap.JMoveToDefaults,B);if(B.recall){A.jmap.GMap2.returnToSavedPosition()}else{A.jmap.GMap2.savePosition()}if(typeof C=="function"){return C()}};A.jmap.createKeyboardHandler=function(B){A.jmap.keyboardHandler=new GKeyboardHandler(A.jmap.GMap2);if(typeof B=="function"){return B()}};A.jmap.getMapType=function(){var C=A.jmap.GMap2.getMapTypes();var B=A.jmap.GMap2.getCurrentMapType();if(B.Hz){A.jmap.variables.mapType=B.Hz}};A.jmap.getCenter=function(){var B=A.jmap.GMap2.getCenter();A.jmap.variables.mapCenter=B;if(typeof callback=="function"){return callback(B)}};A.jmap.getBounds=function(){var B=A.jmap.GMap2.getBounds();A.jmap.variables.mapBounds=B;if(typeof callback=="function"){return callback(B)}};A.jmap._initMapType=function(B){switch(B){case"map":var C=G_NORMAL_MAP;break;case"sat":var C=G_SATELLITE_MAP;break;case"hybrid":var C=G_HYBRID_MAP;break}return C};A.jmap._initChecks=function(B){if(typeof GBrowserIsCompatible=="undefined"){A(B).text(A.jmap.JErrors[A.jmap.JOptions.language].cannotLoad).css({color:"#f00"});throw Error(A.jmap.JErrors[A.jmap.JOptions.language].cannotLoad)}if(!GBrowserIsCompatible()){A(B).text(A.jmap.JErrors[A.jmap.JOptions.language].browserNotCompatible).css({color:"#f00"});throw Error(A.jmap.JErrors[A.jmap.JOptions.language].browserNotCompatible)}};A.jmap.storePoints=function(B,C){A.jmap.store=A.extend({},A.jmap.store,B);if(typeof C=="function"){return C(A.jmap.store)}};A.fn.jmap=function(D,B,C){return this.each(function(){if(D=="init"){new A.jmap.init(this,B,C)}else{if(typeof D=="object"||D==null){new A.jmap.init(this,D,B)}else{if(typeof B=="function"){new A.jmap[D](B)}else{try{new A.jmap[D](B,C)}catch(E){throw Error(A.jmap.JErrors[A.jmap.JOptions.language].functionDoesNotExist)}}}}})}})(jQuery);